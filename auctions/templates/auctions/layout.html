{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{% block title %}Auctions{% endblock %}</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link href="{% static 'auctions/styles.css' %}" rel="stylesheet">
    </head>
    <body>

        <div id="age-gate">
            <h1>Please Verify Your Age</h1><br>
            <h4>Are you over 21 years of age?</h4><br>
            <button type="submit" value="1" class="btn btn-success" onclick="setAge(this.value)">Yes</button>
            <button type="submit" value="0" class="btn btn-danger" onclick="setAge(this.value)">No</button><br><br>
            <h4 class="text-danger" id="reject" > You can't proceed. </h4>
        </div>

        <div id="content">
             <h1>Auctions</h1>
            {% if user.is_authenticated %}
                <div>
                    Signed in as <strong>{{ user.username }}</strong>.
                    <a href="{% url 'logout' %}">Log Out</a>
                </div>
            {% else %}
            <div>
                Not signed in.
                <a href="{% url 'login' %}">Log In</a>
                <a href="{% url 'register' %}">Register</a>
            </div>
            {% endif %}
            <hr>        

            {% block body %}
            {% endblock %}            
        </div>       

        <script type="text/javascript">

            checkAge()
                        
            function setAge(value){
                window.localStorage.setItem("AgeOkay", value==1 ? true : false)
                checkAge()
            }

            function checkAge(){

                let AgeOkay = window.localStorage.getItem("AgeOkay")
                let ageGate = document.getElementById("age-gate")
                let content = document.getElementById("content")
                let reject = document.getElementById("reject")

                if(AgeOkay=="true"){                
                    ageGate.style.display = "none"
                    content.style.display = "block"
                }
                else if(AgeOkay==null){
                    ageGate.style.display = "block"
                    content.style.display = "none"
                }
                else{
                    ageGate.style.display = "block"
                    content.style.display = "none"
                    reject.style.visibility = "visible"
                }

            }

        </script>

    </body>
</html>
